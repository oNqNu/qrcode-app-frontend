(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[392],{6402:function(e,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/newIndex",function(){return n(4278)}])},4278:function(e,o,n){"use strict";n.r(o);var t=n(7568),l=n(4924),c=n(6042),r=n(9396),a=n(655),i=n(5893),s=n(196),g=n(6120),x=n.n(g);n(1919);var d=n(7976),h=n(639),u=n(3234),m=n(979),p=n(7741),f=n(7294),j=n(7516),b=n(2898),_=n(8005),S=n.n(_),k=function(){var e,o,n=function(o){if(o.target.files){var n=new FileReader,t=o.target.files[0];if(null!=t){if(t.size>3145728){alert("3MB以上のファイルは扱うことができません\n入力されたファイルサイズは".concat(k(t.size/1024/1024),"MBです"));return}console.log("img !== null"),new(S())(t,{quality:.5,success:function(o){console.log({result:o}),n.readAsDataURL(o),n.onload=function(){if(null!=n.result){console.log("圧縮後の画像(base64)");var e=n.result;C("img_string",e),console.log({compressed_data_uri:e})}},O(e.CropImg)},error:function(e){console.log(e.message),console.log("Compressorが上手く動いていない")}})}}},g=function(){w("central_x_coordinate",String(K.x+K.width/2)),w("central_y_coordinate",String(K.y+K.height/2)),w("x_axis",String(k((K.x+K.width/2)/B.x))),w("y_axis",String(k((K.y+K.height/2)/B.y))),B.x>=B.y?w("scale",String(100*k(K.height/B.y))):w("scale",String(100*k(K.width/B.x,100)))},_=function(){console.log("execute getImgSize");var e=document.getElementById("crop");if(null!=e){var o=e.width,n=e.height;y("x",o),y("y",n),W(!0)}},k=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Math.round(e*o)/o},C=function(e,o){z(function(n){return(0,r.Z)((0,c.Z)({},n),(0,l.Z)({},e,o))})},w=function(e,o){console.log("".concat(e,";").concat(o)),U(function(n){return(0,r.Z)((0,c.Z)({},n),(0,l.Z)({},e,o))})},y=function(e,o){console.log("".concat(e,";").concat(o)),L(function(n){return(0,r.Z)((0,c.Z)({},n),(0,l.Z)({},e,o))})};(o=e||(e={})).SelectImg="select img",o.CropImg="scrop img",o.InputParameter="input parameter",o.DisplayQRcode="display qrcode",o.DisplayResult="display result",o.IsLoading="is loading";var v=(0,f.useState)({img_string:"",data:"https://www.okayama-u.ac.jp",version:"5",ecc_level:"0",encoding:"0",mask_pattern:"0",traial_times:"50",threshold:"96",scale:"50",variance:"0.7",y_axis:"0.5",x_axis:"0.5"}),I=v[0],z=v[1],R=(0,f.useState)(""),Q=R[0],D=R[1],Z=(0,f.useState)(""),A=Z[0],E=Z[1],F=(0,f.useState)("");F[0],F[1];var P=(0,f.useState)(!1);P[0],P[1];var q=(0,f.useState)({x:0,y:0});q[0],q[1];var M=(0,f.useState)(!1),N=M[0],W=M[1],$=(0,f.useState)({x:0,y:0}),B=$[0],L=$[1],X=(0,f.useState)(e.SelectImg),H=X[0],O=X[1],T=(0,f.useState)({central_x_coordinate:"",central_y_coordinate:"",y_axis:"",x_axis:"",scale:""}),G=T[0],U=T[1],J=(0,f.useState)({unit:"px",x:100,y:100,width:150,height:150}),K=J[0],V=J[1];function Y(){return(Y=(0,t.Z)(function(){var o,n,t,l;return(0,a.__generator)(this,function(c){switch(c.label){case 0:console.log("execute onSubmit"),console.log(I),o=Date.now(),c.label=1;case 1:return c.trys.push([1,3,,4]),O(e.IsLoading),[4,s.ZP.post("https://design-qrcode-api.herokuapp.com/api/create_qrcode",I)];case 2:return n=c.sent(),t=Date.now(),console.log("API応答時間"),console.log(t-o),D(n.data.qrcode_base64),E(n.data.output_base64),console.log("response.data"),console.log(n.data),O(e.DisplayResult),[3,4];case 3:return l=c.sent(),console.error(l),[3,4];case 4:return[2]}})})).apply(this,arguments)}return(0,i.jsxs)(d.m$.div,{bgColor:"#fffdfa",minH:"100vh",children:[(0,i.jsxs)(h.kC,{flexDirection:"column",alignItems:"center",py:"12",children:[(0,i.jsxs)(h.kC,{flexFlow:"row",alignItems:"center",gap:"2",children:[(0,i.jsx)("img",{alt:"logo",src:"./qrlogo.png",width:"100px"}),(0,i.jsx)(h.xv,{fontSize:"5xl",fontWeight:"bold",children:"Design QRcode Generator"})]}),H==e.SelectImg&&(0,i.jsxs)(h.xu,{mt:"24",children:[(0,i.jsx)(h.xv,{fontSize:"2xl",pt:"4",fontWeight:"medium",children:"QRコードの背景画像に設定する画像を選択してください．"}),(0,i.jsx)(u.NI,{w:"xl",children:(0,i.jsx)(m.II,{mt:"4",borderColor:"darkgray",fontWeight:"black",type:"file",accept:".jpg,.jpeg,",onChange:function(e){n(e)}})}),(0,i.jsx)(h.xv,{children:"※ jpg, jpeg 形式の画像が利用可能です"})]}),H==e.CropImg&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.xv,{fontSize:"2xl",pt:"4",children:"QRコード化する範囲を指定してください．"}),(0,i.jsx)(h.M5,{width:"550px",children:(0,i.jsx)(x(),{crop:K,aspect:1,onChange:function(e){N||_(),V(e),console.log(K),g(),console.log({originalImgSize:B});var o=document.getElementById("crop");C("img_string",o.currentSrc),console.log({"element.currentSrc":o.currentSrc})},children:(0,i.jsx)(d.m$.img,{id:"crop",src:"".concat(I.img_string),alt:"切り抜き前画像",height:"auto",maxWidth:"100%"})})}),(0,i.jsxs)(h.kC,{mt:"4",gap:"8",children:[(0,i.jsx)(p.zx,{colorScheme:"facebook",onClick:function(){console.log("clicked 確定 button"),C("scale",G.scale),C("x_axis",G.x_axis),C("y_axis",G.y_axis),O(e.InputParameter),W(!1)},children:"確定"}),(0,i.jsx)(p.zx,{onClick:function(){O(e.SelectImg)},colorScheme:"blackAlpha",children:"別の画像を選択する"})]})]}),H==e.InputParameter&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.xv,{fontSize:"2xl",mt:"4",children:"パラメータを入力してください．"}),b.ZP.map(function(e){return(0,i.jsxs)(h.xu,{children:[(0,i.jsx)(u.lX,{htmlFor:"name",mt:"4",w:"max",fontWeight:"bold",children:e.name}),(0,i.jsx)(m.II,{w:"xl",borderColor:"blackAlpha.400",id:e.label,variant:"filled",value:I[e.label],placeholder:e.label,backgroundColor:"blue.50",onChange:function(o){C(e.label,o.target.value),console.log(B)}},e.label)]},e.label)}),(0,i.jsxs)(h.kC,{mt:"10",gap:4,children:[(0,i.jsx)(p.zx,{onClick:function(){console.log(I),function(){Y.apply(this,arguments)}()},colorScheme:"facebook",children:"QRコード作成"}),(0,i.jsx)(p.zx,{onClick:function(){O(e.SelectImg)},colorScheme:"blackAlpha",children:"別の画像を選択する"})]})]}),H==e.IsLoading&&(0,i.jsxs)(h.kC,{mt:"100",flexFlow:"column",children:[(0,i.jsx)(h.xv,{fontSize:"4xl",children:"デザインQRコードを作成中..."}),(0,i.jsx)(d.m$.img,{src:b.Eu,alt:"loading",width:"100px",height:"100px",mx:"auto",mt:"4"})]}),H==e.DisplayQRcode&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.M5,{bgColor:"blackAlpha.400",width:"700px",height:"700px",mt:"12",borderRadius:"100px",children:(0,i.jsx)(d.m$.img,{src:"data:image/jpeg;base64,".concat(Q),alt:"デザインQRコード",width:"400",height:"400"})}),(0,i.jsxs)(h.kC,{gap:12,children:[(0,i.jsx)(p.zx,{onClick:function(){O(e.DisplayResult)},colorScheme:"facebook",mt:"4",children:"全体画像に切り替える"}),(0,i.jsx)(p.zx,{onClick:function(){O(e.SelectImg),E("")},colorScheme:"blackAlpha",mt:"4",children:"別の画像で試す"}),(0,i.jsx)(p.zx,{as:"a",href:"data:image/jpeg;base64,".concat(Q),download:!0,bgColor:"green.500",color:"white",mt:"4",mr:"4",_hover:{color:"blue.500",bgColor:"white",border:"1px",borderColor:"blue.500"},children:(0,i.jsx)(j.yf7,{size:"30px"})})]})]}),H==e.DisplayResult&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.M5,{bgColor:"blackAlpha.400",width:"700px",height:"700px",mt:"12",borderRadius:"100px",children:(0,i.jsx)(d.m$.img,{src:"data:image/jpeg;base64,".concat(A),alt:"デザインQRコード",maxW:"580px",maxH:"580px"})}),(0,i.jsxs)(h.kC,{gap:12,children:[(0,i.jsx)(p.zx,{onClick:function(){O(e.DisplayQRcode)},colorScheme:"facebook",mt:"4",children:"QRコードに切り替える"}),(0,i.jsx)(p.zx,{onClick:function(){O(e.SelectImg),E("")},colorScheme:"blackAlpha",mt:"4",children:"別の画像で試す"}),(0,i.jsx)(p.zx,{as:"a",href:"data:image/jpeg;base64,".concat(A),download:!0,bgColor:"green.500",color:"white",mt:"4",mr:"4",_hover:{color:"blue.500",bgColor:"white",border:"1px",borderColor:"blue.500"},children:(0,i.jsx)(j.yf7,{size:"30px"})})]})]})]}),(0,i.jsx)(h.kC,{position:"sticky",top:"100vh",w:"100%",h:"60px",bgColor:"blackAlpha.400",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(h.xv,{fontSize:"xl",children:"※QRコード (QR Code) は株式会社デンソーウェーブの登録商標です"})})]})};o.default=k}},function(e){e.O(0,[874,946,46,772,452,774,888,179],function(){return e(e.s=6402)}),_N_E=e.O()}]);