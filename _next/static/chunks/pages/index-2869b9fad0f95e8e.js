(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(5075)}])},5075:function(e,n,o){"use strict";o.r(n);var t=o(7568),l=o(4924),c=o(6042),r=o(9396),i=o(655),a=o(5893),s=o(9008),x=o.n(s),d=o(196),g=o(6120),h=o.n(g);o(1919);var u=o(7976),m=o(639),p=o(3234),f=o(979),j=o(7741),b=o(7294),_=o(7516),S=o(2898),k=o(8005),y=o.n(k),C=function(){var e,n,o=function(n){if(n.target.files){var o=new FileReader,t=n.target.files[0];if(null!=t){if(t.size>3145728){alert("3MB以上のファイルは扱うことができません\n入力されたファイルサイズは".concat(k(t.size/1024/1024),"MBです"));return}console.log("img !== null"),new(y())(t,{quality:.5,success:function(n){console.log({result:n}),o.readAsDataURL(n),o.onload=function(){if(null!=o.result){console.log("圧縮後の画像(base64)");var e=o.result;C("img_string",e),console.log({compressed_data_uri:e})}},O(e.CropImg)},error:function(e){console.log(e.message),console.log("Compressorが上手く動いていない")}})}}},s=function(){w("central_x_coordinate",String(V.x+V.width/2)),w("central_y_coordinate",String(V.y+V.height/2)),w("x_axis",String(k((V.x+V.width/2)/L.x))),w("y_axis",String(k((V.y+V.height/2)/L.y))),L.x>=L.y?w("scale",String(100*k(V.height/L.y))):w("scale",String(100*k(V.width/L.x,100)))},g=function(){console.log("execute getImgSize");var e=document.getElementById("crop");if(null!=e){var n=e.width,o=e.height;v("x",n),v("y",o),$(!0)}},k=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Math.round(e*n)/n},C=function(e,n){R(function(o){return(0,r.Z)((0,c.Z)({},o),(0,l.Z)({},e,n))})},w=function(e,n){console.log("".concat(e,";").concat(n)),J(function(o){return(0,r.Z)((0,c.Z)({},o),(0,l.Z)({},e,n))})},v=function(e,n){console.log("".concat(e,";").concat(n)),X(function(o){return(0,r.Z)((0,c.Z)({},o),(0,l.Z)({},e,n))})};(n=e||(e={})).SelectImg="select img",n.CropImg="scrop img",n.InputParameter="input parameter",n.DisplayQRcode="display qrcode",n.DisplayResult="display result",n.IsLoading="is loading";var I=(0,b.useState)({img_string:"",data:"https://www.okayama-u.ac.jp",version:"5",ecc_level:"0",encoding:"0",mask_pattern:"0",traial_times:"50",threshold:"96",scale:"50",variance:"0.7",y_axis:"0.5",x_axis:"0.5"}),z=I[0],R=I[1],Q=(0,b.useState)(""),D=Q[0],Z=Q[1],A=(0,b.useState)(""),E=A[0],P=A[1],F=(0,b.useState)("");F[0],F[1];var M=(0,b.useState)(!1);M[0],M[1];var N=(0,b.useState)({x:0,y:0});N[0],N[1];var q=(0,b.useState)(!1),W=q[0],$=q[1],B=(0,b.useState)({x:0,y:0}),L=B[0],X=B[1],G=(0,b.useState)(e.SelectImg),H=G[0],O=G[1],T=(0,b.useState)({central_x_coordinate:"",central_y_coordinate:"",y_axis:"",x_axis:"",scale:""}),U=T[0],J=T[1],K=(0,b.useState)({unit:"px",x:100,y:100,width:150,height:150}),V=K[0],Y=K[1];function ee(){return(ee=(0,t.Z)(function(){var n,o,t,l;return(0,i.__generator)(this,function(c){switch(c.label){case 0:console.log("execute onSubmit"),console.log(z),n=Date.now(),c.label=1;case 1:return c.trys.push([1,3,,4]),O(e.IsLoading),[4,d.ZP.post("https://design-qrcode-api.herokuapp.com/api/create_qrcode",z)];case 2:return o=c.sent(),t=Date.now(),console.log("API応答時間"),console.log(t-n),Z(o.data.qrcode_base64),P(o.data.output_base64),console.log("response.data"),console.log(o.data),O(e.DisplayResult),[3,4];case 3:return l=c.sent(),console.error(l),[3,4];case 4:return[2]}})})).apply(this,arguments)}return(0,a.jsxs)(u.m$.div,{bgColor:"#fffdfa",minH:"100vh",children:[(0,a.jsxs)(x(),{children:[(0,a.jsx)("title",{children:"Design QRcode Generator"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)(m.kC,{flexDirection:"column",alignItems:"center",py:"12",children:[(0,a.jsx)(m.X6,{size:"3xl",children:"Design QRcode Generator"}),H==e.SelectImg&&(0,a.jsxs)(m.xu,{mt:"24",children:[(0,a.jsx)(m.xv,{fontSize:"2xl",pt:"4",fontWeight:"medium",children:"QRコードの背景画像に設定する画像を選択してください．"}),(0,a.jsx)(p.NI,{w:"xl",children:(0,a.jsx)(f.II,{mt:"4",borderColor:"darkgray",fontWeight:"black",type:"file",accept:".jpg,.jpeg,",onChange:function(e){o(e)}})}),(0,a.jsx)(m.xv,{children:"※ jpg, jpeg 形式の画像が利用可能です"})]}),H==e.CropImg&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.xv,{fontSize:"2xl",pt:"4",children:"QRコード化する範囲を指定してください．"}),(0,a.jsx)(m.M5,{width:"550px",children:(0,a.jsx)(h(),{crop:V,aspect:1,onChange:function(e){W||g(),Y(e),console.log(V),s(),console.log({originalImgSize:L});var n=document.getElementById("crop");C("img_string",n.currentSrc),console.log({"element.currentSrc":n.currentSrc})},children:(0,a.jsx)(u.m$.img,{id:"crop",src:"".concat(z.img_string),alt:"切り抜き前画像",height:"auto",maxWidth:"100%"})})}),(0,a.jsxs)(m.kC,{mt:"4",gap:"8",children:[(0,a.jsx)(j.zx,{colorScheme:"facebook",onClick:function(){console.log("clicked 確定 button"),C("scale",U.scale),C("x_axis",U.x_axis),C("y_axis",U.y_axis),O(e.InputParameter),$(!1)},children:"確定"}),(0,a.jsx)(j.zx,{onClick:function(){O(e.SelectImg)},colorScheme:"blackAlpha",children:"別の画像を選択する"})]})]}),H==e.InputParameter&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.xv,{fontSize:"2xl",mt:"4",children:"パラメータを入力してください．"}),S.ZP.map(function(e){return(0,a.jsxs)(m.xu,{children:[(0,a.jsx)(p.lX,{htmlFor:"name",mt:"4",w:"max",fontWeight:"bold",children:e.name}),(0,a.jsx)(f.II,{w:"xl",borderColor:"blackAlpha.400",id:e.label,variant:"filled",value:z[e.label],placeholder:e.label,backgroundColor:"blue.50",onChange:function(n){C(e.label,n.target.value),console.log(L)}},e.label)]},e.label)}),(0,a.jsxs)(m.kC,{mt:"10",gap:4,children:[(0,a.jsx)(j.zx,{onClick:function(){console.log(z),function(){ee.apply(this,arguments)}()},colorScheme:"facebook",children:"QRコード作成"}),(0,a.jsx)(j.zx,{onClick:function(){O(e.SelectImg)},colorScheme:"blackAlpha",children:"別の画像を選択する"})]})]}),H==e.IsLoading&&(0,a.jsxs)(m.kC,{mt:"100",flexFlow:"column",children:[(0,a.jsx)(m.xv,{fontSize:"4xl",children:"デザインQRコードを作成中..."}),(0,a.jsx)(u.m$.img,{src:S.Eu,alt:"loading",width:"100px",height:"100px",mx:"auto",mt:"4"})]}),H==e.DisplayQRcode&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.M5,{bgColor:"blackAlpha.400",width:"700px",height:"700px",mt:"12",borderRadius:"100px",children:(0,a.jsx)(u.m$.img,{src:"data:image/jpeg;base64,".concat(D),alt:"デザインQRコード",width:"400",height:"400"})}),(0,a.jsxs)(m.kC,{gap:12,children:[(0,a.jsx)(j.zx,{onClick:function(){O(e.DisplayResult)},colorScheme:"facebook",mt:"4",children:"全体画像に切り替える"}),(0,a.jsx)(j.zx,{onClick:function(){O(e.SelectImg),P("")},colorScheme:"blackAlpha",mt:"4",children:"別の画像で試す"}),(0,a.jsx)(j.zx,{as:"a",href:"data:image/jpeg;base64,".concat(D),download:!0,bgColor:"green.500",color:"white",mt:"4",mr:"4",_hover:{color:"blue.500",bgColor:"white",border:"1px",borderColor:"blue.500"},children:(0,a.jsx)(_.yf7,{size:"30px"})})]})]}),H==e.DisplayResult&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.M5,{bgColor:"blackAlpha.400",width:"700px",height:"700px",mt:"12",borderRadius:"100px",children:(0,a.jsx)(u.m$.img,{src:"data:image/jpeg;base64,".concat(E),alt:"デザインQRコード",maxW:"580px",maxH:"580px"})}),(0,a.jsxs)(m.kC,{gap:12,children:[(0,a.jsx)(j.zx,{onClick:function(){O(e.DisplayQRcode)},colorScheme:"facebook",mt:"4",children:"QRコードに切り替える"}),(0,a.jsx)(j.zx,{onClick:function(){O(e.SelectImg),P("")},colorScheme:"blackAlpha",mt:"4",children:"別の画像で試す"}),(0,a.jsx)(j.zx,{as:"a",href:"data:image/jpeg;base64,".concat(E),download:!0,bgColor:"green.500",color:"white",mt:"4",mr:"4",_hover:{color:"blue.500",bgColor:"white",border:"1px",borderColor:"blue.500"},children:(0,a.jsx)(_.yf7,{size:"30px"})})]})]})]}),(0,a.jsx)(m.kC,{position:"sticky",top:"100vh",w:"100%",h:"60px",bgColor:"blackAlpha.400",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(m.xv,{fontSize:"xl",children:"※QRコード (QR Code) は株式会社デンソーウェーブの登録商標です"})})]})};n.default=C},9008:function(e,n,o){e.exports=o(5443)}},function(e){e.O(0,[874,946,46,772,452,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);