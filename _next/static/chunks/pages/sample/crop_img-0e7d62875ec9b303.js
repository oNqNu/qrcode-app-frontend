(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{9788:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sample/crop_img",function(){return n(3952)}])},3952:function(e,t,n){"use strict";n.r(t);var r=n(4924),i=n(6042),o=n(9396),a=n(5893),h=n(639),s=n(7741),d=n(9008),c=n.n(d),l=n(7294),p=n(6120),g=n.n(p);n(1919);var w=function(){var e=function(){console.log("execute getImgSize");var e=document.getElementById("crop");if(null!=e){var t=e.naturalWidth,n=e.naturalHeight;d("x",t),d("y",n),x(!0)}},t=function(){n("central_x_coordinate",String(R.x+R.width/2)),n("central_y_coordinate",String(R.y+R.width/2)),n("x_axis",String((R.x+R.width/2)/D.x)),n("y_axis",String((R.y+R.height/2)/D.y)),D.x>=D.y?n("scale",String(R.height/D.y)):n("scale",String(R.width/D.x))},n=function(e,t){console.log("".concat(e,";").concat(t)),C(function(n){return(0,o.Z)((0,i.Z)({},n),(0,r.Z)({},e,t))})},d=function(e,t){console.log("".concat(e,";").concat(t)),b(function(n){return(0,o.Z)((0,i.Z)({},n),(0,r.Z)({},e,t))})},p=(0,l.useState)("");p[0],p[1];var w=(0,l.useState)(!1),u=w[0],x=w[1],y=(0,l.useState)(!1);y[0],y[1];var m=(0,l.useState)({central_x_coordinate:"",central_y_coordinate:"",y_axis:"",x_axis:"",scale:""}),f=m[0],C=m[1],v=(0,l.useState)({x:0,y:0}),D=v[0],b=v[1],_=(0,l.useState)({unit:"px",x:25,y:25,width:50,height:50}),R=_[0],S=_[1];return(0,a.jsxs)("div",{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"Design QRcode Generator"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)(h.kC,{flexDirection:"column",alignItems:"center",py:"12",children:[(0,a.jsx)(h.X6,{size:"3xl",children:"Design QRcode Generator"}),(0,a.jsx)(h.xv,{fontSize:"2xl",pt:"4",children:"画像切り抜き処理サンプル"}),(0,a.jsx)(g(),{crop:R,aspect:1,onChange:function(n){u||e(),S(n),console.log(R),t()},children:(0,a.jsx)("img",{id:"crop",src:"/abe.jpg",alt:"切り抜き前画像"})}),(0,a.jsxs)(h.kC,{mt:"4",gap:"8",children:[(0,a.jsx)(s.zx,{colorScheme:"facebook",onClick:function(){e()},children:"画像サイズ取得"}),(0,a.jsx)(s.zx,{colorScheme:"green",onClick:function(){console.log("clicked 必要パラメータ算出 button"),console.log(f)},children:"必要パラメータを算出"})]})]})]})};t.default=w},9008:function(e,t,n){e.exports=n(5443)},6120:function(e,t,n){var r;r=e=>(()=>{"use strict";var t={899(t){t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{Component:()=>u,areCropsEqual:()=>h,centerCrop:()=>d,clamp:()=>a,containCrop:()=>p,convertToPercentCrop:()=>c,convertToPixelCrop:()=>l,default:()=>u,defaultCrop:()=>o,makeAspectCrop:()=>s,nudgeCrop:()=>g});var e=r(899),t=r.n(e);function n(e){var t,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e){if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t)}return i}let o={x:0,y:0,width:0,height:0,unit:"px"};function a(e,t,n){return Math.min(Math.max(e,t),n)}function h(e,t){return e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit}function s(e,t,n,r){let i=l(e,n,r);return e.width&&(i.height=i.width/t),e.height&&(i.width=i.height*t),i.y+i.height>r&&(i.height=r-i.y,i.width=i.height*t),i.x+i.width>n&&(i.width=n-i.x,i.height=i.width/t),"%"===e.unit?c(i,n,r):i}function d(e,t,n){let r=l(e,t,n);return r.x=(t-r.width)/2,r.y=(n-r.height)/2,"%"===e.unit?c(r,t,n):r}function c(e,t,n){return"%"===e.unit?{...o,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/n*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/n*100:0}}function l(e,t,n){return e.unit?"px"===e.unit?{...o,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*n/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*n/100:0}:{...o,...e,unit:"px"}}function p(e,t,n,r,i,o=0,a=0,h=r,s=i){let d={...e},c=Math.min(o,r),l=Math.min(a,i),p=Math.min(h,r),g=Math.min(s,i);t&&(t>1?(l=(c=a?a*t:c)/t,p=h*t):(c=(l=o?o/t:l)*t,g=s/t)),d.y<0&&(d.height=Math.max(d.height+d.y,l),d.y=0),d.x<0&&(d.width=Math.max(d.width+d.x,c),d.x=0);let w=r-(d.x+d.width);w<0&&(d.x=Math.min(d.x,r-c),d.width+=w);let u=i-(d.y+d.height);if(u<0&&(d.y=Math.min(d.y,i-l),d.height+=u),d.width<c&&("sw"!==n&&"nw"!=n||(d.x-=c-d.width),d.width=c),d.height<l&&("nw"!==n&&"ne"!=n||(d.y-=l-d.height),d.height=l),d.width>p&&("sw"!==n&&"nw"!=n||(d.x-=p-d.width),d.width=p),d.height>g&&("nw"!==n&&"ne"!=n||(d.y-=g-d.height),d.height=g),t){let x=d.width/d.height;if(x<t){let y=Math.max(d.width/t,l);"nw"!==n&&"ne"!=n||(d.y-=y-d.height),d.height=y}else if(x>t){let m=Math.max(d.height*t,c);"sw"!==n&&"nw"!=n||(d.x-=m-d.width),d.width=m}}return d}function g(e,t,n,r){let i={...e};return"ArrowLeft"===t?"nw"===r?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):"w"===r?(i.x-=n,i.width+=n):"sw"===r?(i.x-=n,i.width+=n,i.height+=n):"ne"===r?(i.y+=n,i.width-=n,i.height-=n):"e"===r?i.width-=n:"se"===r&&(i.width-=n,i.height-=n):"ArrowRight"===t&&("nw"===r?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):"w"===r?(i.x+=n,i.width-=n):"sw"===r?(i.x+=n,i.width-=n,i.height-=n):"ne"===r?(i.y-=n,i.width+=n,i.height+=n):"e"===r?i.width+=n:"se"===r&&(i.width+=n,i.height+=n)),"ArrowUp"===t?"nw"===r?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):"n"===r?(i.y-=n,i.height+=n):"ne"===r?(i.y-=n,i.width+=n,i.height+=n):"sw"===r?(i.x+=n,i.width-=n,i.height-=n):"s"===r?i.height-=n:"se"===r&&(i.width-=n,i.height-=n):"ArrowDown"===t&&("nw"===r?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):"n"===r?(i.y+=n,i.height-=n):"ne"===r?(i.y+=n,i.width-=n,i.height-=n):"sw"===r?(i.x-=n,i.width+=n,i.height+=n):"s"===r?i.height+=n:"se"===r&&(i.width+=n,i.height+=n)),i}let w={capture:!0,passive:!1};class u extends e.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,e.createRef)(),this.mediaRef=(0,e.createRef)(),this.initChangeCalled=!1,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{let{crop:t,disabled:n}=this.props,r=this.getBox();if(!t)return;let i=l(t,r.width,r.height);if(n)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let o=e.target.dataset.ord,a=Boolean(o),h=e.clientX,s=e.clientY,d=i.x,c=i.y;if(o){let p=e.clientX-r.x,g=e.clientY-r.y,w=0,u=0;"ne"===o||"e"==o?(w=p-(i.x+i.width),u=g-i.y,d=i.x,c=i.y+i.height):"se"===o||"s"===o?(w=p-(i.x+i.width),u=g-(i.y+i.height),d=i.x,c=i.y):"sw"===o||"w"==o?(w=p-i.x,u=g-(i.y+i.height),d=i.x+i.width,c=i.y):"nw"!==o&&"n"!=o||(w=p-i.x,u=g-i.y,d=i.x+i.width,c=i.y+i.height),h=d+r.x+w,s=c+r.y+u}this.evData={startClientX:h,startClientY:s,startCropX:d,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:a,ord:o},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{let{crop:t,disabled:n,locked:r,keepSelection:i,onChange:o}=this.props,a=this.getBox();if(n||r||i&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let h=e.clientX-a.x,s=e.clientY-a.y,d={unit:"px",x:h,y:s,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:h,startCropY:s,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,o(l(d,a.width,a.height),c(d,a.width,a.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{let{crop:t,disabled:n,onChange:r,onDragStart:i}=this.props,o=this.getBox();if(n||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(e));let{evData:a}=this,s;a.clientX=e.clientX,a.clientY=e.clientY,h(t,s=a.isResize?this.resizeCrop():this.dragCrop())||r(l(s,o.width,o.height),c(s,o.width,o.height))},this.onComponentKeyDown=e=>{let{crop:t,disabled:n,onChange:r,onComplete:i}=this.props,o=this.getBox();if(n)return;let h=e.key,s=!1;if(!t)return;let d=this.makePixelCrop(),p=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?u.nudgeStepLarge:e.shiftKey?u.nudgeStepMedium:u.nudgeStep;if("ArrowLeft"===h?(d.x-=p,s=!0):"ArrowRight"===h?(d.x+=p,s=!0):"ArrowUp"===h?(d.y-=p,s=!0):"ArrowDown"===h&&(d.y+=p,s=!0),s){e.cancelable&&e.preventDefault(),d.x=a(d.x,0,o.width-d.width),d.y=a(d.y,0,o.height-d.height);let g=l(d,o.width,o.height),w=c(d,o.width,o.height);r(g,w),i&&i(g,w)}},this.onHandlerKeyDown=(e,t)=>{let{aspect:n=0,crop:r,disabled:i,minWidth:o=0,minHeight:a=0,maxWidth:s,maxHeight:d,onChange:w,onComplete:x}=this.props,y=this.getBox();if(i||!r||"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.stopPropagation(),e.preventDefault();let m=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?u.nudgeStepLarge:e.shiftKey?u.nudgeStepMedium:u.nudgeStep,f=p(g(l(r,y.width,y.height),e.key,m,t),n,t,y.width,y.height,o,a,s,d);if(!h(r,f)){let C=c(f,y.width,y.height);w(f,C),x&&x(f,C)}},this.onDocPointerDone=e=>{let{crop:t,disabled:n,onComplete:r,onDragEnd:i}=this.props,o=this.getBox();this.unbindDocMove(),!n&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(e),r&&r(l(t,o.width,o.height),c(t,o.width,o.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=e=>{var t;null===(t=this.componentRef.current)||void 0===t||t.scrollTo(0,0)}}get document(){return document}getBox(){let e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};let{x:t,y:n,width:r,height:i}=e.getBoundingClientRect();return{x:t,y:n,width:r,height:i}}componentDidUpdate(e){let{crop:t,onComplete:n}=this.props;if(n&&!e.crop&&t){let{width:r,height:i}=this.getBox();r&&i&&n(l(t,r,i),c(t,r,i))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,w),this.document.addEventListener("pointerup",this.onDocPointerDone,w),this.document.addEventListener("pointercancel",this.onDocPointerDone,w),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,w),this.document.removeEventListener("pointerup",this.onDocPointerDone,w),this.document.removeEventListener("pointercancel",this.onDocPointerDone,w),this.docMoveBound=!1)}getCropStyle(){let{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){let{evData:e}=this,t=this.getBox(),n=this.makePixelCrop(),r=e.clientX-e.startClientX,i=e.clientY-e.startClientY;return n.x=a(e.startCropX+r,0,t.width-n.width),n.y=a(e.startCropY+i,0,t.height-n.height),n}getPointRegion(e){let{evData:t}=this,n=t.clientX-e.x,r=t.clientY-e.y<t.startCropY;return n<t.startCropX?r?"nw":"sw":r?"ne":"se"}resizeCrop(){let{evData:e}=this,t=this.getBox(),{aspect:n=0,minWidth:r=0,minHeight:i=0,maxWidth:o,maxHeight:a}=this.props,h=this.getPointRegion(t),s=this.makePixelCrop(),d=e.ord?e.ord:h,c=e.clientX-e.startClientX,l=e.clientY-e.startClientY,g={unit:"px",x:0,y:0,width:0,height:0};"ne"===h?(g.x=e.startCropX,g.width=c,n?(g.height=g.width/n,g.y=e.startCropY-g.height):(g.height=Math.abs(l),g.y=e.startCropY-g.height)):"se"===h?(g.x=e.startCropX,g.y=e.startCropY,g.width=c,g.height=n?g.width/n:l):"sw"===h?(g.x=e.startCropX+c,g.y=e.startCropY,g.width=Math.abs(c),g.height=n?g.width/n:l):"nw"===h&&(g.x=e.startCropX+c,g.width=Math.abs(c),n?(g.height=g.width/n,g.y=e.startCropY-g.height):(g.height=Math.abs(l),g.y=e.startCropY+l));let w=p(g,n,h,t.width,t.height,r,i,o,a);return n||u.xyOrds.indexOf(d)>-1?(s.x=w.x,s.y=w.y,s.width=w.width,s.height=w.height):u.xOrds.indexOf(d)>-1?(s.x=w.x,s.width=w.width):u.yOrds.indexOf(d)>-1&&(s.y=w.y,s.height=w.height),s}createCropSelection(){let{ariaLabels:e=u.defaultProps.ariaLabels,disabled:n,locked:r,renderSelectionAddon:i,ruleOfThirds:o,crop:a}=this.props,h=this.getCropStyle();if(a)return t().createElement("div",{style:h,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!r&&t().createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},t().createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),i&&t().createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:e=>e.stopPropagation()},i(this.state)),o&&t().createElement(t().Fragment,null,t().createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),t().createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(){let e={...o,...this.props.crop||{}},t=this.getBox();return l(e,t.width,t.height)}render(){let{aspect:e,children:r,circularCrop:i,className:o,crop:a,disabled:h,locked:s,style:d,ruleOfThirds:c}=this.props,{cropIsActive:l,newCropIsBeingDrawn:p}=this.state,g=a?this.createCropSelection():null,w=function(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(i&&(i+=" "),i+=t);return i}("ReactCrop",o,{"ReactCrop--active":l,"ReactCrop--disabled":h,"ReactCrop--locked":s,"ReactCrop--new-crop":p,"ReactCrop--fixed-aspect":a&&e,"ReactCrop--circular-crop":a&&i,"ReactCrop--rule-of-thirds":a&&c,"ReactCrop--invisible-crop":!this.dragStarted&&a&&!a.width&&!a.height});return t().createElement("div",{ref:this.componentRef,className:w,style:d},t().createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},r),g)}}u.xOrds=["e","w"],u.yOrds=["n","s"],u.xyOrds=["nw","ne","se","sw"],u.nudgeStep=1,u.nudgeStepMedium=10,u.nudgeStepLarge=100,u.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}}})(),i})(),e.exports=r(n(7294))},9396:function(e,t,n){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[946,774,888,179],function(){return e(e.s=9788)}),_N_E=e.O()}]);